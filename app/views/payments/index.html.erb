<section class="content-header">
  <h1>
    Listado de Abonos
    <small>Aqui puede revizar los abonos recientes, verificarlos e ingresar nuevos.</small>
  </h1>
  <ol class="breadcrumb">
    <li><a href="<%= payments_path %>"></i>Abonos</a></li>
  </ol>
</section>
<br>
<div class="container-fluid box box-primary table-pad">
  <table id="table<%=controller_name%>" class="table table-striped table-bordered" width="100%" cellspacing="0">
    <br>
    <thead>
      <tr>
        <th>Cliente</th>
        <th>Descripción</th>
        <th>Monto</th>
        <th>Fecha</th>
        <th>¿Verificado?</th>
        <th></th>
        <th></th>
      </tr>
    </thead>

    <tbody>
      <% @payments.each do |payment| %>
        <tr>
          <td><%= payment.client.clientRut %>: <%= payment.client.clientName %> <%= payment.client.clientLastName %></td>
          <td><%= payment.description %></td>
          <td><%= number_to_currency(payment.amount, precision: 0, unit: "$ ", delimiter: ".")%></td>
          <td><%= payment.pay_date %></td>
          <td>
            <% if payment.verified %>
              <span class="badge label-success"><i class="fa fa-check"></i></span>
            <% else %>
              <span class="badge label-danger"><i class="fa fa-close"></i></span>
            <% end %>
          </td>
          <td><%= link_to payment_update_verified_path(payment), method: :patch, data: { confirm: '¿Esta seguro?' } do %> <i class="fa fa-check"></i> Aprobar
            <% end %>
          </td>
          <td><%= link_to payment, method: :delete, data: { confirm: '¿Esta seguro?' } do %> 
              <i class="fa fa-close"></i> Cancelar
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <%= will_paginate @payment, :param_name => 'page', renderer: BootstrapPagination::Rails %>  
  <br>
  <%= link_to new_payment_path , class: "btn btn-primary btn-flat" do %>
    <p class="white-text"> + Nuevo Abono</p>
  <% end %>
  <br><br>
</div>
<%= render 'layouts/table' %>
