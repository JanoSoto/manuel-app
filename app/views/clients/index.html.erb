<p id="notice"><%= notice %></p>

<section class="content-header">
  <h1>
    Listado de Clientes
    <small>Seleccione al cliente que desea consultar</small>
  </h1>
  <ol class="breadcrumb">
    <li><a href="<%= clients_path %>"></i>Clientes</a></li>
  </ol>
</section>
<br>
<div class="container-fluid box box-primary table-pad">
  <table id="tabeClients" class="table table-striped table-bordered" width="100%" cellspacing="0">
    <br>
    <thead>
      <tr>
        <th>RUT</th>
        <th>Nombre</th>
        <th>Deuda</th>
        <th>Última atención</th>
        <th>Número de mascotas</th>
        <th>Dias de atención</th>
        <th>¿Habilitado?</th>
        <th></th>
        <th></th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% @clients.each do |client| 
        if !client.disabled
          dis_class= "fa fa-user-times red"
        else
          dis_class= "fa fa-user-plus green"
        end
      %>
        <tr>
          <td><%= client.clientRut %></td>
          <td><%= client.clientName %> <%= client.clientLastName %></td>
          <td>Pendiente</td>
          <td>Pendiente</td>
          <td>Pendiente</td>
          <td>Pendiente</td>
          <td align="center">
            <% if !client.disabled %>
              <span class="badge label-success"><i class="fa fa-check"></i></span>
            <% else %>
              <span class="badge label-danger"><i class="fa fa-close"></i></span>
            <% end %>
          </td>
          <td><%= link_to client do %> <i class="fa fa-eye blue"></i> <% end %></td>
          <td><%= link_to edit_client_path(client) do %><i class="fa fa-pencil"></i> <% end %></td>
          <td><%= link_to client, method: :delete, data: { confirm: '¿Estas seguro?' } do %><i class="<%=dis_class%>"></i>  <% end %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <%= will_paginate @clients, :param_name => 'page', renderer: BootstrapPagination::Rails %>  
  <br>
  <%= link_to new_client_path , class: "btn btn-primary btn-flat" do %>
    <p class="white-text"> + Nuevo cliente</p>
  <% end %>
  <br><br>
</div>
<script>
 $(function () {
  $('#tabeClients').DataTable({
      "paging": false,
      "lengthChange": false,
      "searching": true,
      "ordering": true,
      "info": false,
      "autoWidth": false,
      "language": {
          "sProcessing":     "Procesando...",
          "sLengthMenu":     "Mostrar _MENU_ registros",
          "sZeroRecords":    "No se encontraron resultados",
          "sEmptyTable":     "Ningún dato disponible en esta tabla",
          "sInfo":           "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
          "sInfoEmpty":      "Mostrando registros del 0 al 0 de un total de 0 registros",
          "sInfoFiltered":   "(filtrado de un total de _MAX_ registros)",
          "sInfoPostFix":    "",
          "sSearch":         "Buscar:",
          "sUrl":            "",
          "sInfoThousands":  ",",
          "sLoadingRecords": "Cargando...",
          "oPaginate": {
              "sFirst":    "Primero",
              "sLast":     "Último",
              "sNext":     "Siguiente",
              "sPrevious": "Anterior"
          },
          "oAria": {
              "sSortAscending":  ": Activar para ordenar la columna de manera ascendente",
              "sSortDescending": ": Activar para ordenar la columna de manera descendente"
          }
      }
    });
  });
</script>
